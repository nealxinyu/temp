"use strict";$("#myskills-sync").on("click",function(){var e=$("span #userid").text();startLoading("#myskills-sync"),$.ajax({type:"GET",url:"/skillset/api/staff/".concat(encodeURIComponent(e),"/skills"),dataType:"json"}).done(function(e){if("success"==e.status)if(0!=Object.keys(e.changes).length){for(var a=0,s=Object.keys(e.changes);a<s.length;a++){var t=s[a];addSkillToDom(t)}success("".concat(Object.keys(e.changes).length," changes are made"),"#myskills-sync")}else success("no changes are made","#myskills-sync");else error(e.errorMessage,"#myskills-sync")}).fail(function(e){error("".concat(e.responseJSON.errorMessage),"#myskills-sync")})}),$("#myskills-container").on("click","span[data-role=remove]",function(e){e.stopPropagation();e=$(this).parent().attr("data-skill");$("#modal-delete-skill .skill").text(e),$("#modal-delete-skill button").attr("data-skill",e),$("#modal-delete-skill").modal("show")}),$("#modal-delete-skill button[type=myskill-delete-skill]").on("click",function(){var e=$("span #userid").text(),a=$(this).attr("data-skill");startLoading(),$.ajax({type:"DELETE",url:"/skillset/api/staff/".concat(encodeURIComponent(e),"/skill/").concat(encodeURIComponent(a)),dataType:"json"}).done(function(e){"success"==e.status?($('#myskills-container div[data-skill="'.concat(e.deleted,'"]')).remove(),success("".concat(e.deleted," is deleted")),$("#modal-delete-skill").modal("hide")):error(e.errorMessage)}).fail(function(e){error("".concat(e.responseJSON.errorMessage))})}),$("#myskills-container").on("click","div[type=myskill-badge]",function(){var e=$(this).attr("data-skill");$("#modal-update-proficiency .skill").text(e),$("#modal-update-proficiency button").attr("data-skill",e),$("#modal-update-proficiency").modal("show")}),$("#myskills-add").on("mouseover",function(){$(this).find("input").focus()}),$("#myskills-add input").on("keypress",function(e){var a;13==e.which&&(a=$("#myskills-add-input").val(),e=$("span #userid").text(),addSkill(e,a))}),$("#myskills-add-btn").on("click",function(e){var a=$("#myskills-add-input").val(),s=$("span #userid").text();addSkill(s,a)});var addSkill=function(e,a){startLoading("#myskills-add-btn"),$.ajax({type:"POST",url:"/skillset/api/staff/".concat(encodeURIComponent(e),"/skills"),dataType:"json",data:{skill:a}}).done(function(e){var a;"success"==e.status?(a=e.added,addSkillToDom(a),$("#myskills-add-input").val(""),success("".concat(a," is added"),"#myskills-add-btn")):error(e.errorMessage,"#myskills-add-btn")}).fail(function(e){error("".concat(e.responseJSON.errorMessage),"#myskills-add-btn")})},addSkillToDom=function(e){$("#myskills-container .badge-secondary").last().after('\n        <div type="myskill-badge" data-skill="'.concat(e,'" class="badge badge-myskill badge-md badge-secondary my-1" data-toggle="tooltip" data-placement="top" title="click to set the proficiency">\n            <span>').concat(e,'</span>\n            <span data-role="remove"></span>\n        </div>\n    '))};$("button[type=myskill-update-proficiency]").on("click",function(){var e=$("span #userid").text(),a=$(this).attr("data-skill"),s=$('#myskills-container div[type=myskill-badge][data-skill="'.concat(a,'"]'));$.ajax({type:"PUT",url:"/skillset/api/staff/".concat(encodeURIComponent(e),"/skill/").concat(encodeURIComponent(a)),dataType:"json",data:{proficiency:$(this).attr("proficiency")}}).done(function(e){switch(s.removeClass("badge-default").removeClass("badge-info").removeClass("badge-secondary").removeClass("badge-tertiary"),e.after){case 0:$("#myskills-container .badge-tertiary").last().after(s).after(" "),s.addClass("badge-tertiary");break;case 1:$("#myskills-container .badge-secondary").last().after(s).after(" "),s.addClass("badge-secondary");break;case 2:$("#myskills-container .badge-info").last().after(s).after(" "),s.addClass("badge-info");break;case 3:$("#myskills-container .badge-default").last().after(s).after(" "),s.addClass("badge-default")}success("proficiency updated"),$("#modal-update-proficiency").modal("hide")}).fail(function(e){error("".concat(e.responseJSON.errorMessage))})});